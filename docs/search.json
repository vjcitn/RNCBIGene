[{"path":"https://github.com/vjcitn/RNCBIGene/articles/RNCBIGene.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"RNCBIGene: NCBI Gene annotation in parquet","text":"Bioconductor’s annotation system functioned well decade pivotal resource analysis tool development. See AnnotationDbi documentation details. AnnotationDbi packages based use SQLite manage organism-specific vocabularies resolve queries mappings identifier sets. example, learn Gene Ontology annotations gene ORMDL3 Homo sapiens: RNCBIGene, NCBI’s GO annotations organisms single resource. geneFromCache package retrieve Apache Parquet representation gene2go.gz text resource distributed NCBI’s FTP site. query, use knowledge ORMDL3 Gene ID 94103. purpose package provide pin-compatible replacements AnnotationDbi packages. huge effort, material support effort exist time. package created indicate opportunities simplification performance enhancement arising adoption Parquet Arrow annotation representation interrogation.","code":"library(org.Hs.eg.db) go_orm = AnnotationDbi::select(org.Hs.eg.db, key=\"ORMDL3\", keytype=\"SYMBOL\",     columns=c(\"GO\", \"ENTREZID\")) head(go_orm) ##   SYMBOL         GO EVIDENCE ONTOLOGY ENTREZID ## 1 ORMDL3 GO:0002903      IMP       BP    94103 ## 2 ORMDL3 GO:0005515      IPI       MF    94103 ## 3 ORMDL3 GO:0005783      IDA       CC    94103 ## 4 ORMDL3 GO:0005789      IEA       CC    94103 ## 5 ORMDL3 GO:0005886      TAS       CC    94103 ## 6 ORMDL3 GO:0006672      IBA       BP    94103 library(RNCBIGene) library(dplyr) go_ds = arrow::open_dataset(geneFromCache(\"gene2go.parquet\")) lkor = go_ds |> filter(`#tax_id`==9606, GeneID==94103) |> collect() |> as.data.frame() DT::datatable(lkor)"},{"path":"https://github.com/vjcitn/RNCBIGene/articles/RNCBIGene.html","id":"scope","dir":"Articles","previous_headings":"","what":"Scope","title":"RNCBIGene: NCBI Gene annotation in parquet","text":"seven parquet files available package. can work “simultaneously”. Illustration: find UniProt identifiers associated gene ORMDL3 humans.","code":"RNCBIGene:::available_gene_parquet ## [1] \"gene2go.parquet\"                      ## [2] \"gene2pubmed.parquet\"                  ## [3] \"gene_info.parquet\"                    ## [4] \"gene2accession.parquet\"               ## [5] \"gene2refseq.parquet\"                  ## [6] \"gene_orthologs.parquet\"               ## [7] \"gene_refseq_uniprotkb_collab.parquet\" paths = lapply(RNCBIGene:::available_gene_parquet, geneFromCache) pop = lapply(paths, arrow::open_dataset) names(pop) = RNCBIGene:::available_gene_parquet sapply(pop, function(x) x |> nrow()) ##                      gene2go.parquet                  gene2pubmed.parquet  ##                            104591215                             63850913  ##                    gene_info.parquet               gene2accession.parquet  ##                             58928318                            224922002  ##                  gene2refseq.parquet               gene_orthologs.parquet  ##                             87197813                             13600744  ## gene_refseq_uniprotkb_collab.parquet  ##                            175112694 pro = pop[[\"gene2accession.parquet\"]] |>     filter(`#tax_id` == 9606, Symbol == \"ORMDL3\") |>     select(protein_accession.version) |> collect() |> pull() |> setdiff(\"-\") pop[[\"gene_refseq_uniprotkb_collab.parquet\"]] |> filter(NCBI_tax_id == 9606) |>     filter(`#NCBI_protein_accession` %in% pro)  |> collect() ## # A tibble: 36 × 5 ##    `#NCBI_protein_accession` UniProtKB_protein_ac…¹ NCBI_tax_id UniProtKB_tax_id ##    <chr>                     <chr>                        <int>            <int> ##  1 NP_001307730.1            B3KS83                        9606             9606 ##  2 NP_001307730.1            J3QRM9                        9606             9606 ##  3 NP_001307730.1            Q6UY83                        9606             9606 ##  4 NP_001307730.1            Q8N138                        9606             9606 ##  5 NP_001307731.1            B3KS83                        9606             9606 ##  6 NP_001307731.1            J3QRM9                        9606             9606 ##  7 NP_001307731.1            Q6UY83                        9606             9606 ##  8 NP_001307731.1            Q8N138                        9606             9606 ##  9 NP_001307732.1            B3KS83                        9606             9606 ## 10 NP_001307732.1            J3QRM9                        9606             9606 ## # ℹ 26 more rows ## # ℹ abbreviated name: ¹​UniProtKB_protein_accession ## # ℹ 1 more variable: method <chr>"},{"path":"https://github.com/vjcitn/RNCBIGene/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Vince Carey. Author, maintainer.","code":""},{"path":"https://github.com/vjcitn/RNCBIGene/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Carey V (2025). RNCBIGene: High-performance data representations gene annotations NCBI. R package version 0.0.2, https://github.com/vjcitn/RNCBIGene.","code":"@Manual{,   title = {RNCBIGene: High-performance data representations of gene annotations from NCBI},   author = {Vince Carey},   year = {2025},   note = {R package version 0.0.2},   url = {https://github.com/vjcitn/RNCBIGene}, }"},{"path":"https://github.com/vjcitn/RNCBIGene/index.html","id":"rncbigene","dir":"","previous_headings":"","what":"High-performance data representations of gene annotations from NCBI","title":"High-performance data representations of gene annotations from NCBI","text":"Performant standard representations gene annotation organisms cataloged NCBI","code":""},{"path":"https://github.com/vjcitn/RNCBIGene/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"High-performance data representations of gene annotations from NCBI","text":"devtools::install_github(\"vjcitn/RNCBIGene\")","code":""},{"path":"https://github.com/vjcitn/RNCBIGene/index.html","id":"purpose","dir":"","previous_headings":"","what":"Purpose","title":"High-performance data representations of gene annotations from NCBI","text":"Text files NCBI Gene transformed parquet placed NSF Open Storage Network bucket. geneFromCache function retrieves caches parquet files.","code":"> example(geneFromCache)  gnFrmC> gi = geneFromCache(\"gene_info.parquet\")  gnFrmC> arrow::open_dataset(gi) |> dplyr::filter(`#tax_id`==9606) |> head() |> dplyr::collect() # A tibble: 6 × 16   `#tax_id` GeneID Symbol LocusTag Synonyms      dbXrefs chromosome map_location       <int>  <int> <chr>  <chr>    <chr>         <chr>   <chr>      <chr> 1      9606      1 A1BG   -        A1B|ABG|GAB|… MIM:13… 19         19q13.43 2      9606      2 A2M    -        A2MD|CPAMD5|… MIM:10… 12         12p13.31 3      9606      3 A2MP1  -        A2MP          HGNC:H… 12         12p13.31 4      9606      9 NAT1   -        AAC1|MNAT|NA… MIM:10… 8          8p22 5      9606     10 NAT2   -        AAC2|NAT-2|P… MIM:61… 8          8p22 6      9606     11 NATP   -        AACP|NATP1    HGNC:H… 8          8p22 # ℹ 8 more variables: description <chr>, type_of_gene <chr>, #   Symbol_from_nomenclature_authority <chr>, #   Full_name_from_nomenclature_authority <chr>, Nomenclature_status <chr>, #   Other_designations <chr>, Modification_date <int>, Feature_type <chr>"},{"path":"https://github.com/vjcitn/RNCBIGene/index.html","id":"available-resources","dir":"","previous_headings":"","what":"Available resources","title":"High-performance data representations of gene annotations from NCBI","text":"Contents https://mghp.osn.xsede.org/bir190004-bucket01/BiocParquetNCBI, retrieved 22 Feb 2025 transformed parquet (see inst/scripts demonstration code):","code":"3002338275 2025-05-17 09:28:29.618223689 gene2accession.parquet 680657744 2025-05-15 10:31:33.209868982 gene2go.parquet  89080561 2025-05-15 10:37:45.825464461 gene2pubmed.parquet 1467468877 2025-05-17 09:28:38.701230380 gene2refseq.parquet 965232147 2025-05-15 10:33:17.845775772 gene_info.parquet  43279811 2025-05-17 09:28:42.882232368 gene_orthologs.parquet 1019413239 2025-05-17 09:28:47.416233993 gene_refseq_uniprotkb_collab.parquet"},{"path":"https://github.com/vjcitn/RNCBIGene/reference/geneFromCache.html","id":null,"dir":"Reference","previous_headings":"","what":"populate cache with available parquet files if needed, return path to cached file — geneFromCache","title":"populate cache with available parquet files if needed, return path to cached file — geneFromCache","text":"populate cache available parquet files needed, return path cached file","code":""},{"path":"https://github.com/vjcitn/RNCBIGene/reference/geneFromCache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"populate cache with available parquet files if needed, return path to cached file — geneFromCache","text":"","code":"geneFromCache(resource, cache = BiocFileCache::BiocFileCache())"},{"path":"https://github.com/vjcitn/RNCBIGene/reference/geneFromCache.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"populate cache with available parquet files if needed, return path to cached file — geneFromCache","text":"resource character(1) cache character(1) BiocFileCache-like object","code":""},{"path":"https://github.com/vjcitn/RNCBIGene/reference/geneFromCache.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"populate cache with available parquet files if needed, return path to cached file — geneFromCache","text":"path local version resource","code":""},{"path":"https://github.com/vjcitn/RNCBIGene/reference/geneFromCache.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"populate cache with available parquet files if needed, return path to cached file — geneFromCache","text":"","code":"oldop = options() options(timeout=3600) gi = geneFromCache(\"gene_info.parquet\") options(oldop) arrow::open_dataset(gi) |> dplyr::filter(`#tax_id`==9606) |> head() |> dplyr::collect() #> # A tibble: 6 × 16 #>   `#tax_id`    GeneID Symbol   LocusTag Synonyms dbXrefs chromosome map_location #>       <int>     <int> <chr>    <chr>    <chr>    <chr>   <chr>      <chr>        #> 1      9606 127889609 LOC1278… -        -        -       18         -            #> 2      9606 127889610 LOC1278… -        -        -       18         -            #> 3      9606 127889611 LOC1278… -        -        -       18         -            #> 4      9606 127889612 LOC1278… -        -        -       18         -            #> 5      9606 127889613 LOC1278… -        -        -       18         -            #> 6      9606 127889614 LOC1278… -        -        -       18         -            #> # ℹ 8 more variables: description <chr>, type_of_gene <chr>, #> #   Symbol_from_nomenclature_authority <chr>, #> #   Full_name_from_nomenclature_authority <chr>, Nomenclature_status <chr>, #> #   Other_designations <chr>, Modification_date <int>, Feature_type <chr>"},{"path":"https://github.com/vjcitn/RNCBIGene/reference/remote_gene_query.html","id":null,"dir":"Reference","previous_headings":"","what":"use duckdb to query NCBI Gene data in OSN bucket — remote_gene_query","title":"use duckdb to query NCBI Gene data in OSN bucket — remote_gene_query","text":"use duckdb query NCBI Gene data OSN bucket","code":""},{"path":"https://github.com/vjcitn/RNCBIGene/reference/remote_gene_query.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"use duckdb to query NCBI Gene data in OSN bucket — remote_gene_query","text":"","code":"remote_gene_query(   gres = \"gene2pubmed\",   qual = \"limit 5\",   tname = basename(tempfile()) )"},{"path":"https://github.com/vjcitn/RNCBIGene/reference/remote_gene_query.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"use duckdb to query NCBI Gene data in OSN bucket — remote_gene_query","text":"gres name gene resource, suffix, see available_gene_parquet vector (unexported) qual SQL fragment used qualify select * clause tname character(1) arbitrary name use internal sql table","code":""},{"path":"https://github.com/vjcitn/RNCBIGene/reference/remote_gene_query.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"use duckdb to query NCBI Gene data in OSN bucket — remote_gene_query","text":"","code":"if (interactive()) { remote_gene_query(qual = 'where \"#tax_id\" = 9606 limit 10;') }"},{"path":"https://github.com/vjcitn/RNCBIGene/reference/taxonomyMap.html","id":null,"dir":"Reference","previous_headings":"","what":"retrieve a vector of taxonomy names indexed by taxonomy codes — taxonomyMap","title":"retrieve a vector of taxonomy names indexed by taxonomy codes — taxonomyMap","text":"retrieve vector taxonomy names indexed taxonomy codes","code":""},{"path":"https://github.com/vjcitn/RNCBIGene/reference/taxonomyMap.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"retrieve a vector of taxonomy names indexed by taxonomy codes — taxonomyMap","text":"","code":"taxonomyMap()"},{"path":"https://github.com/vjcitn/RNCBIGene/reference/taxonomyMap.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"retrieve a vector of taxonomy names indexed by taxonomy codes — taxonomyMap","text":"retrieved https://ftp.ncbi.nlm.nih.gov/pub/taxonomy/new_taxdump/taxdump_readme.txt Feb 22 2025","code":""},{"path":"https://github.com/vjcitn/RNCBIGene/reference/taxonomyMap.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"retrieve a vector of taxonomy names indexed by taxonomy codes — taxonomyMap","text":"","code":"tmap = taxonomyMap() tmap['9606'] #>           9606  #> \"Homo sapiens\""}]
